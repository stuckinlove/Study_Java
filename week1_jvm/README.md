# JVM

java.exe로 jvm이 시작되면 jvm은 운영체제로부터 할당받은 메모리영역을 아래의 세부내용으로 나누어 사용한다.

## Runtime Data Area
- method area
- heap area
- stack area
- pc register
- native method stack

#### method area
클래스(.class)들을 클래스 로더가 읽어들어, 클래스 별로 런타임 상수풀, 필드, 메소드 데이터, 메소드 코드, 생성코드 등을 분해서 저장한다.
메소드 영역은 jvm이 시작할 때 생성되고 모든 스레드가 공유한다.

#### heap area
객체와 배열이 생성되는 영역이다.
힙 영역에 생성된 객체를 스택 영역의 변수나 다른 객체의 필드가 참조한다.
GC의 영역으로서, 힙 영역에 생성된 객체를 참조하는 변수나 필드가 없다면 쓰레로 인식해 GC가 힙영역에서 제거한다.

#### stack area
스택 영역은 쓰레드마다 하나씩 존재하며, 스레드가 시작될 때 할당된다.
스택 영역은 POP방식으로 동작한다. 
 -> 메소드를 호출할 때마다 프레임을 추가하고 메소드가 종료되면 제거 하는 방식.push, pop
프레임 내부에는 로컬 변수스택이 있어, 로컬 변수가 여기에 저장된다.
(메소드 내에 선언된 로컬변수, 파라미터, 리턴 값 등) 
"Store s = new Store" 라고 한다면 Store s는 스택영역에, new Store클래스의 인스턴스는 힙 영역에 생성되고,
인스턴스의 주소값을 s가 갖고 있다.
싱글톤 방식으로 인스턴스를 공유하지 않는 이상 메소드를 호출할 떄마다 같은 클래스라고 할 지라도 각기 다른 주소값을 갖고 있다.

#### pc register
스레드가 생성될 때 생성되는 영역이다.

#### native method stack
다른 언어의 코드를 실행하기 위한 스택이다.

#### 쓰레드 공유영역
메소드 영역과 힙영역은 스레드간 데이터를 공유한다.
그 이외에는 공유되지 않는다.
 
 

 

